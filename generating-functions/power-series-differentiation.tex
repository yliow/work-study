%\section{The differentiation operator}
\begin{python0}
from solutions import *; clear() 
\end{python0}

A useful operator on power series is \defone{differentiation}:
\begin{align*}
\frac{d}{dx} \ \sum^\infty_{n = 0} a_n x^n 
&= \sum_{n = 0}^\infty a_n \frac{d}{dx} x^n \\
&= \sum_{n=1}^\infty na_n x^{n-1} \\
&= \sum_{n = 0}^\infty (n+1)a_{n+1} x^n 
\end{align*}

Applying operator to the geometric series 
\[
\sum_{n=0}^\infty x^n = \frac{1}{1-x}
\]
we get
\[
\frac{d}{dx} \ \sum_{n=0}^\infty x^n = \frac{d}{dx} \ \frac{1}{1-x}
\]
i.e.
\[
\sum_{n=0}^\infty (n+1) x^n = \frac{1}{(1-x)^{2}}
\]

Of course we already know that from the formula:
\[
\sum_{n=0}^\infty \binom{k+n-1}{n} x^n = \frac{1}{(1-x)^{k}}
\]
Just substitute $k = 2$ and you get the above.
You can also think of the above computation as a proof of this
formula for the special case of $k = 2$.

Now let's step back and look at the differentiation operator.
This is what it does:
\begin{align*}
\frac{d}{dx} \ \sum^\infty_{n = 0} a_n x^n 
&= \sum_{n=1}^\infty na_n x^{n-1} \\
\end{align*}
Now instead of changing the index value like what we did above,
suppose I simply \lq\lq patch up'' the $n-1$ power of $x$ in the series
to $x^n$ by applying the shift-by-1 operator, i.e. multiplication by $x$:
\begin{align*}
x\frac{d}{dx} \ \sum^\infty_{n = 0} a_n x^n 
&= x\sum_{n=1}^\infty na_n x^{n-1} \\
&= \sum_{n=1}^\infty na_n x^{n}
\end{align*}
Of course this is the same as
\begin{align*}
x\frac{d}{dx} \ \sum^\infty_{n = 0} a_n x^n 
&= \sum_{n=0}^\infty na_n x^{n}
\end{align*}
since adding the term $n a_n x^n$ for $n=0$ is just adding $0$ to the series:
it adds nothing.

You see that operator
\[
x \frac{d}{dx}
\]
changes the power series as follows:
\begin{align*}
\sum^\infty_{n = 0} a_n x^n  \rightarrow
\sum_{n=0}^\infty (na_n) x^n
\end{align*}

I will refer to $\frac{d}{dx}$ and $x\frac{d}{dx}$ as differentiation
operators; it should be clear from the context which one I meant.
You can think of this special operator as multiplying the
coefficient with the corresponding power of $x$.

So what?

Well we know that
\[
\sum_{n=0}^\infty x^n = \frac{1}{1-x}
\]
Therefore
\[
\sum_{n=0}^\infty nx^n = x\frac{d}{dx} \, \frac{1}{1-x}
\]
Hence we've found a rational function for the generating function for
the sequence
\[
0, 1, 2, 3, 4, \ldots
\]
If we apply it again we get
\[
\sum_{n=0}^\infty n^2x^n = 
x\frac{d}{dx} 
\biggl( 
x\frac{d}{dx} \, \frac{1}{1-x}
\biggl)
\]
and we have the rational function for the squares:
\[
0^2, 1^2, 2^2, 3^2, 4^2, \ldots
\]

And what do these rational functions look like?
For the first case we have
\begin{align*}
\sum_{n=0}^\infty nx^n 
= x\frac{d}{dx} \, \frac{1}{1-x} \\
= \frac{x}{(1 - x)^2}
\end{align*}
And for the second case
\begin{align*}
\sum_{n=0}^\infty n^2x^n 
&= x\frac{d}{dx} \biggl( x \frac{d}{dx} \, \frac{1}{1-x} \biggr) \\
&= x\frac{d}{dx} \frac{x}{(1 - x)^2} \\
&= x \frac{(1-x)^2 - x(2(1-x)(-1))}{(1-x)^4} \\
&= x \frac{(1-x) + 2x}{(1-x)^3} \\
&= x \frac{1 + x}{(1-x)^3}
\end{align*}

In the next section we'll derive formulas for expressions such as
\[
0 + 1 + 2 + \cdots + n
\]
(you already know that this is $n(n+1)/2$) and
\[
0^2 + 1^2 + 2^2 + \cdots + n^2
\]
etc.


\newpage
\begin{ex}
The generating functions for cubes is
\[
\sum_{n=0}^\infty n^3 x^n
\]
Rewrite this as a rational function.
\end{ex}


\newpage
\begin{ex}
Rewrite the power series
\[
\sum_{n=0}^\infty n(n+1) x^n
\]
as a rational function in two different ways:
(1) use rational functions of power series that you already know
(2) use the differentiation operator.
\end{ex}


\newpage
\textsc{Differentiation.}

This is just a quick reminder of some formulas from Calc I.
For examples/exercises for review, 
you should refer to your calc textbook (or talk
to me - I'll give you some).

Actually we do not need a lot of differentiation rules.
Why? 
Because we're work mainly with 
rational functions.
Now rational functions are fractions of polynomials.
So of course you need to know how to take the derivative
of polynomials. If $n \neq 0$ and $c$ is a constant:
\[
\frac{d}{dx} x^n = n x^{n-1}, \,\,\,\,\ \frac{d}{dx} c = 0
\]
and 
\[
\frac{d}{dx} (f + g) = f' + g'
\]
Using the above rules you can differentiate any polynomial in $x$:
\begin{align*}
\frac{d}{dx} (2 + 3x + 5x^2 + 7x^3)
&= \frac{d}{dx} 2 + \frac{d}{dx} (3x) +  \frac{d}{dx}(5x^2) + 
\frac{d}{dx} (7x^3) \\
&= 0 + 3 +  10x + 21x^2
\end{align*}
and of course for a polynomial of degree $d$, we have
\[
\frac{d}{dx} \sum_{n=0}^d a_n x^n = \sum_{n=1}^d na_nx^{n-1}
\]
Since you have fractions, of course you need to know 
the quotient rule for differentiation:
\[
\frac{d}{dx} \frac{u}{v} = 
\frac{u' v - uv'}{v^2}
\]
where $u'$ is the same as $\frac{du}{dx}$.
For instance
\[
\frac{d}{dx} \ \frac{x^3}{(1 - x^2)(x+1)^2}
=
\frac{
\frac{d}{dx}(x^3) \cdot (1 - x^2)(x+1)^2
- x^3 \cdot \frac{d}{dx} \bigl( (1 - x^2)(x+1)^2 \bigr)
}
{\bigl( (1 - x^2)(x+1)^2 \bigr)^2}
\]
However note that quotients can also be computed using
the product rule since
\[
\frac{d}{dx} \ \frac{x^3}{(1 - x^2)(x+1)^2}
=
\frac{d}{dx} \ 
\biggl(
x^3 \cdot \bigl( (1 - x^2)(x+1)^2 \bigr)^{-1}
\biggr)
\]
In many cases the polynomials are powers of polynomial
(example: $(1 - x)^5$). 
Obviously you can expand the power to get a 
polynomial using binomial theorem.
But it's a lot faster to use the chain rule:
\[
\frac{d}{dx} f(g(x)) = f'(g(x)) g'(x)
\]
For instance
\[
\frac{d}{dx} \ (1-x)^5 = 5(1-x)^4 \cdot (-1)
\]
or
\[
\frac{d}{dx} \ (7x^2-3x^6)^5 = 5(1-x)^4 \cdot (14x - 18x^5)
\]
Note that using the chain rule guarantees that the resulting
polynomial in this case remains factored.

You should refer to your calc 1 textbooks for details and examples.

\newpage
\subsection*{Solutions}
\input{solutions.tex} % input solutions.tex
