\tinysidebar{\debug{exercises/{tower-variation0/answer.tex}}}
For the case of $n = 1$,
we have to move disk 1 from A to B to C.
Therefore if $a_n$ is the number of moves, then
\[
a_1 = 2
\]
Note that in the original problem the number of steps for $n = 1$
is 1.
It's easy (although tedious) to check that $a_2 = 8$ and $a_3 = 26$.
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = []
Cs = []
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
As,Bs = Bs,As
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
As,Bs = Bs,As
As,Cs = Cs,As
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
As,Bs = Bs,As
As,Cs = Cs,As
Bs,Cs=Cs,Bs
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
As,Bs = Bs,As
As,Cs = Cs,As
Bs,Cs=Cs,Bs
As,Bs = Bs,As
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}
\begin{python}
from latextool_basic import *
p = Plot()
As = [1 - x/3.0 for x in range(0, 2)][::-1]
Bs = As[0:1]; As = As[1:2]
Cs = []
Bs,Cs = Cs,Bs
As,Bs = Bs,As
As,Cs = Cs,As
Bs,Cs=Cs,Bs
As,Bs = Bs,As
Cs = Bs + Cs; Bs = []
hanoi(p, diskss=[As, Bs, Cs], pegheight=1)
print(p)
\end{python}


Here's the recursive procedure.
Again we solve the problem with $n$ disks by 
assuming that we can solve the problem for $n-1$ disk.
We are given this:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(0, 8)][::-1]
Bs = []
Cs = []
    
hanoi(p, diskss=[As, Bs, Cs], pegheight=2.75)
print(p)
\end{python}
We cannot move the first $n-1$ disks to B as before.
Why? Because the last disk, disk $n$, must move from A to B and then to C.
Therefore we move the first $n-1$ disks to C:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(1, 8)][::-1]
Bs = []
Cs = [3]

def color(w):
    if w<3: return "blue!20"
    else: return "red!20"
hanoi(p, diskss=[Cs, Bs, As], color=color, pegheight=2.75)
print(p)
\end{python}
and then move disk $n$ from A to B:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(1, 8)][::-1]
Bs = []
Cs = [3]

def color(w):
    if w<3: return "blue!20"
    else: return "red!20"
hanoi(p, diskss=[Bs, Cs, As], color=color, pegheight=2.75)
print(p)
\end{python}
then move the first $n-1$ disks to A:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(1, 8)][::-1]
Bs = []
Cs = [3]

def color(w):
    if w<3: return "blue!20"
    else: return "red!20"
hanoi(p, diskss=[As, Cs, Bs], color=color, pegheight=2.75)
print(p)
\end{python}
and move disk $n$ to C:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(1, 8)][::-1]
Bs = []
Cs = [3]

def color(w):
    if w<3: return "blue!20"
    else: return "red!20"
hanoi(p, diskss=[As, Bs, Cs], color=color, pegheight=2.75)
print(p)
\end{python}
and then move the first $n-1$ disks to C:
\begin{python}
from latextool_basic import *

p = Plot()
As = [3 - x/3.0 for x in range(0, 8)][::-1]
Bs = []
Cs = []

def color(w):
    if w<3: return "blue!20"
    else: return "red!20"
hanoi(p, diskss=[Cs, Bs, As], color=color, pegheight=2.75)
print(p)
\end{python}
Altogether the number of steps, i.e. $a_n$ is
\[
a_n = 3a_{n-1} + 2
\]
I'll leave you to compute $a_0$ and give a complete description
for $a_n$.
