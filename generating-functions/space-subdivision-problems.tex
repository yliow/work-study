\sectionthree{Space subdivision problems}
\begin{python0}
from solutions import *; clear() 
\end{python0}

What is the maximum number of regions do you get when you
cut up a 2-dimensional space by $n$ lines.
With one line:
\input{stdout29.tex}
the 2-D space is cut up into two pieces.
Let $a_n$ be the number of regions cut out by $n$ lines.
With two lines we get 4.
\input{stdout30.tex}
So far we have
\[
a_0 = 1, \,\,\,\,\,
a_1 = 2, \,\,\,\,\,
a_2 = 4
\]
To simplify the problem, a line cannot go through a point of
intersection.
With three:
\input{stdout31.tex}
you get 7.
Note that the last line above, $L_3$, cuts through 3 regions,
and therefore adds 3 more
regions to the regions already obtained with the first two lines.
The next line will cut through 4 regions.
Come to think of it, $L_1$ (the first line) cuts through 1 region --
the uncut region,
$L_2$ (the second line) cuts through
2 regions.
In general line $L_n$ cuts through $n$ regions.
Now before $L_n$, therefore $a_{n-1}$ regions.
With $L_n$, the number of regions is $a_{n-1}$ and
$n$ regions are cut up by $L_n$. 
Therefore
\[
a_n = a_{n-1} + n
\]
for $n \geq 1$.


\input{exercises/space0/main.tex}

\newpage
Let $a(x) = \sum_{n=0}^\infty a_n x^n$.
\begin{align*}
a(x) 
&= a_0 + \sum_{n=1}^\infty (a_{n-1} + n) x^n \\
&= a_0 + \sum_{n=1}^\infty a_{n-1} x^n + \sum_{n=0}^\infty n x^n \\
&= a_0 + x a(x) + \sum_{n=0}^\infty n x^n \\
\therefore\,\,\,\,\,\,
a(x) 
&= 
\frac{1 + x\frac{d}{dx} \sum_{n=0}^\infty x^n}{1 - x} \\
&=\frac{1 + x\frac{d}{dx} \frac{1}{1-x} }{1 - x} \\
&=\frac{1 + x \frac{1}{(1-x)^2} }{1 - x} \\
&=\frac{(1-x)^2 + x}{(1 - x)^2} \\
&=\frac{1 - x + x^2}{(1 - x)^3} \\
&=(1 - x + x^2) \sum_{n=0}^\infty \binom{3 + n - 1}{n} x^n \\
&=(1 - x + x^2) \sum_{n=0}^\infty \binom{n + 2}{2} x^n \\
&=
\sum_{n=0}^\infty \binom{n + 2}{2} x^n
- \sum_{n=0}^\infty \binom{n + 2}{2} x^{n+1}
+ \sum_{n=0}^\infty \binom{n + 2}{2} x^{n+2} \\
&=
\sum_{n=0}^\infty \binom{n + 2}{2} x^n
- \sum_{n=1}^\infty \binom{n + 1}{2} x^{n}
+ \sum_{n=2}^\infty \binom{n}{2} x^{n}
\end{align*}
Hence
\[
a_0 = 1, \,\,\,\,\,
a_1 = \binom{0 + 2}{2} + \binom{1 + 1}{2} = 2
\]
and for $n \geq 2$
\begin{align*}
a_n 
&= 
\binom{n + 2}{2} +
- \binom{n + 1}{2}
+ \binom{n}{2} \\
&= \frac{1}{2} 
((n+2)(n+1)
- (n+1)n
+ n(n-1)) \\
&= \frac{1}{2} 
(n^2 
+ n
+ 2)
\end{align*}
and note that this closed form 
can also be used for $a_0, a_1$.
Hence for $n \geq 0$
\begin{align*}
a_n 
= \frac{1}{2}
(n^2 
+ n
+ 2)
\end{align*}
or if you like
\begin{align*}
a_n 
= \frac{n(n+1)}{2} + 1
\end{align*}


\input{exercises/space1/main.tex}

\input{exercises/space2/main.tex}
  
\input{exercises/space3/main.tex}

\input{exercises/space4/main.tex}

\input{exercises/space5/main.tex}
