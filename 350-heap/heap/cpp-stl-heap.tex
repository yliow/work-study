%-*-latex-*-
\sectionthree{C++ STL heap functions}
\begin{python0}
from solutions import *; clear()
\end{python0}

C++ provides heap functions
which operate on sequential container such as \verb!std::vector!
or arrays.
By default the functions assume the heap is a maxheap.

To use it do this at the top of your cpp file:
\begin{Verbatim}[frame=single, fontsize=\small]
#include <algorithm>
\end{Verbatim}

Let \verb!v! be a \verb!std::vector< T >! object (for some type \verb!T!).
\begin{enumerate}[nosep]
  \li \verb!std::make_heap(v.begin(), v.end())!: make \verb!v! into a maxheap
  \li \verb!std::is_heap(v.begin(), v.end())!: returns \verb!true! if \verb!v! is maxheap
  \li \verb!std::is_heap_until(v.begin(), v.end())!:
  return iterator pointing to first value that violates maxheap property.
  If \verb!v! is maxheap, !v.end()! is returned.
  \li \verb!std::push_heap(v.begin(), v.end())!: Performs heapify-up on
  the last entry of \verb!v!.
  So to perform a maxheap insert with \verb!x!, you would first
  do \verb!v.push_back(x)! and then execute
  \verb!std::push_heap(v.begin(), v.end())!.
  \li \verb!std::pop_heap(v.begin(), v.end())!: Performs extract-root,
  but instead of removing the root,
  the root is placed at the last value entry of \verb!v!.
  So to perform a maxheap delete, you would first
  do \verb!std::pop_heap(v.begin(), v.end())!
  and then \verb!v.pop_back(x)!.
  \li \verb!std::sort_heap(v.begin(), v.end()!: heapsort assuming the
  vector is already a maxheap.
\end{enumerate}
All the functions above can also accept an extra comparator functor.
\input{stdout95.tex}
Of course you can also use an array:
\input{stdout96.tex}

\begin{ex}
  Create a \verb!priority_queue! class.
  Here are some methods:
  \begin{console}
priority_queue< int > pq; // maxheap by default
std::cout << pq << '\n';
std::cout << pq.size() << '\n';
std::cout << pq.empty() << '\n';
pq.insert(5);
pq.insert(3);
pq.insert(1);
pq.insert(2);
pq.insert(4);
std::cout << pq << '\n';
std::cout << pq.root() << '\n';
pq.delete();
std::cout << pq << '\n';
ps.heapsort();  // heapsort in ascending order
ps.buildheap(); // make into maxheap

priority_queue< int, std::greater< int > > pq1; // minheap
  \end{console}
\end{ex}
