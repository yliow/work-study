%-*-latex-*-
\section{Heap and complete trees}

Recall that we have complete freedom in choosing where to insert a new node.
We also have complete freedom in choosing any leaf to use to overwrite
a node to be deleted as long as the leaf is a descendent of the node whose
value is to delete.
In particular, if we are remove the value of the root of the heap,
we can choose any leaf.

It's because of the above,
after every insert and root value removal,
we can alway ensure that the heap is complete.
Recall that a complete binary tree that is almost full except that the
last level might not have all the leaves.
are at the same level.
Furthermore, we can force to have
all the leaves to be all on the left side of the whole
tree.
This is what I mean by \lq\lq left side'' of the tree:

\begin{python}
from latextool_basic import *
print(r"""
\begin{center}
%s
\end{center}
""" % graph(yscale=1, xscale=1,
layout="""
      A 
   B     C
 D   E F   G
H I J
""",
minimum_size='8mm',
edges='A-B,A-C,B-D,B-E,C-G,C-F,D-H,D-I,E-J',
A=r'label=',
B=r'label=',
C=r'label=',
D=r'label=',
E=r'label=',
F=r'label=',
G=r'label=',
H=r'label=',
I=r'label=',
J=r'label=',
))
\end{python}

This can be achieved by
\begin{tightlist}
\li During insert, always insert a leaf just to the right of the
rightmost leaf at the last level.
\li During delete, always using the right most leaf of the 
last level whenever we remove the root.
\end{tightlist}




\newpage
\begin{ex}
Build a maxheap by inserting the following into an empty tree:
1, 3, 5, 7, 6, 4, 2, 8, 9, 0.
Make sure the tree is complete after each insert and the leaves
at the lowest level are all on the left.
\qed
\end{ex}

\newpage
\begin{ex}
Using the maxheap from the previous question,
remove the following values one after another:
1, 3, 5, 7, 6, 4, 2, 8, 9, 0.
Make sure that after each delete, the tree is complete after each insert and the leaves
at the lowest level are all on the left.
\qed
\end{ex}

\newpage
\begin{ex}
  Suppose that in maxheap, there are two 5's.
  One 5 was inserted at 9AM and the second 5 was inserted
  at 10AM.
  If I delete the maximum value of the heap
  until the heap is empty,
  will the 5 inserted at 9AM be deleted
  from the heap
  before or after the 5 inserted at 10AM?
  Or are both scenarios possible?
\end{ex}

\newpage
Being complete means that the heaps can have the minimal possible height.
At this point, you ought to know that this is a good thing.

This also implies right away that the worse runtimes for 
insert and delete is $O(\log n)$ for both insert and delete
as long as we keep the heap complete.

